jQuery(function($){AppLarger.Viewport=function(){var settings={width:0,height:0,documentHeight:0,nowLoop:Date.now(),fps:1e3/60,scrollTop:-1,_scrollTop:-1,scrollDetectionMode:"scrollEvent",nowScroll:Date.now(),scrollFactor:-1,isScrolledToTop:false,isScrolledToBottom:false,scrollTopOffset:20,scrollBottomOffset:20,isScrolledToFirstScreen:false,isScrolledToLastScreen:false,scrollToOffset:0,scrollToSpeed:2};var init=function(){Debug.log("AppLarger.Viewport.init()");settings.element=$(window);onResizeFinish();bindEventHandlers();onScroll();onLoop()};var bindEventHandlers=function(){if(settings.scrollDetectionMode=="scrollEvent"){settings.element.on("scroll",function(){var now=Date.now();var elapsed=now-settings.nowScroll;if(elapsed>settings.fps){settings.nowScroll=now-elapsed%settings.fps;settings.scrollTop=settings.element.scrollTop();$(document).trigger("viewport/scroll")}})}$(document).on("viewport/scroll",function(){onScroll()}).on("viewport/resize/finish",function(){onResizeFinish()}).on("viewport/scroll/toTop",function(){Debug.log("scrolled to top");$("html").addClass("scrolled-to-top")}).on("viewport/scroll/fromTop",function(){Debug.log("scrolled from top");$("html").removeClass("scrolled-to-top")}).on("viewport/scroll/toBottom",function(){Debug.log("scrolled to bottom");$("html").addClass("scrolled-to-bottom")}).on("viewport/scroll/fromBottom",function(){Debug.log("scrolled from bottom");$("html").removeClass("scrolled-to-bottom")}).on("viewport/scroll/toFirstScreen",function(){Debug.log("scrolled to first screen");$("html").addClass("scrolled-to-first-screen")}).on("viewport/scroll/fromFirstScreen",function(){Debug.log("scrolled from first screen");$("html").removeClass("scrolled-to-first-screen")}).on("viewport/scroll/toLastScreen",function(){Debug.log("scrolled to last screen");$("html").addClass("scrolled-to-last-screen")}).on("viewport/scroll/fromLastScreen",function(){Debug.log("scrolled from last screen");$("html").removeClass("scrolled-to-last-screen")})};var onLoop=function(){requestAnimationFrame(onLoop);var now=Date.now();var elapsed=now-settings.nowLoop;if(elapsed>settings.fps){settings.nowLoop=now-elapsed%settings.fps;$(document).trigger("viewport/loop",[{now:now}]);if(settings.scrollDetectionMode=="requestAnimationFrame"){settings._scrollTop=settings.scrollTop;settings.scrollTop=settings.element.scrollTop();if(settings.scrollTop!=settings._scrollTop){$(document).trigger("viewport/scroll")}}}};var onResizeFinish=function(){Debug.log("AppLarger.Viewport.onResizeFinish()");settings.width=settings.element.width();settings.height=settings.element.height();settings.scrollTop=settings.element.scrollTop();settings.documentHeight=$("html").outerHeight()};var onScroll=function(){Debug.log("AppLarger.Viewport.onScroll()");settings.scrollFactor=settings.scrollTop/(settings.height-settings.documentHeight)*-1;if(settings.scrollTop>settings.scrollTopOffset){if(settings.isScrolledToTop){settings.isScrolledToTop=false;$(document).trigger("viewport/scroll/fromTop")}}if(settings.scrollTop<settings.scrollTopOffset){if(!settings.isScrolledToTop){settings.isScrolledToTop=true;$(document).trigger("viewport/scroll/toTop")}}if(settings.scrollTop>settings.documentHeight-settings.height-settings.scrollBottomOffset){if(!settings.isScrolledToBottom){settings.isScrolledToBottom=true;$(document).trigger("viewport/scroll/toBottom")}}if(settings.scrollTop<settings.documentHeight-settings.height-settings.scrollBottomOffset){if(settings.isScrolledToBottom){settings.isScrolledToBottom=false;$(document).trigger("viewport/scroll/fromBottom")}}if(settings.scrollTop<settings.height){if(!settings.isScrolledToFirstScreen){settings.isScrolledToFirstScreen=true;$(document).trigger("viewport/scroll/toFirstScreen")}}if(settings.scrollTop>settings.height){if(settings.isScrolledToFirstScreen){settings.isScrolledToFirstScreen=false;$(document).trigger("viewport/scroll/fromFirstScreen")}}if(settings.scrollTop>settings.documentHeight-2*settings.height){if(!settings.isScrolledToLastScreen){settings.isScrolledToLastScreen=true;$(document).trigger("viewport/scroll/toLastScreen")}}if(settings.scrollTop<settings.documentHeight-2*settings.height){if(settings.isScrolledToLastScreen){settings.isScrolledToLastScreen=false;$(document).trigger("viewport/scroll/fromLastScreen")}}};var scrollTo=function(target,offset,animate){Debug.log("AppLarger.Viewport.scrollTo()",target,offset,animate);var top=0;if(typeof target=="number"){top=target}if(typeof target=="string"&&$("#"+target).length>0){top=parseInt($("#"+target).offset().top)}if(typeof target=="object"&&target.length>0){top=parseInt(target.offset().top)}if(offset){top=top+offset}else{top=top+settings.scrollToOffset}var distance=Math.floor(Math.abs(top-$(window).scrollTop()));var duration=Math.floor(distance/settings.scrollToSpeed);if(animate){$("html, body").animate({scrollTop:top},duration)}else{settings.element.scrollTop(top)}};var getWidth=function(){return settings.width};var getHeight=function(){return settings.height};var getScrollTop=function(){return settings.scrollTop};var getScrollFactor=function(){return settings.scrollFactor};return{init:function(){init()},scrollTo:function(target,offset,animate){scrollTo(target,offset,animate)},getWidth:function(){return getWidth()},getHeight:function(){return getHeight()},getScrollTop:function(){return getScrollTop()},getScrollFactor:function(){return getScrollFactor()}}}();$(document).ready(function(){AppLarger.Viewport.init()})});jQuery(function($){AppLarger.Module=function(){var settings={};var selector={};var state={};var init=function(){Debug.log("AppLarger.Module.init()");bindEventHandlers()};var bindEventHandlers=function(){};return{init:function(){init()}}}();$(document).ready(function(){AppLarger.Module.init()})});
//# sourceMappingURL=sourcemaps/app--larger.js.map